---
title: '–ú–∞–≥–∏—è –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ —Å—Ö–µ–º—ã. –ß–∞—Å—Ç—å 4: –ö–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è'
date: '2022-08-07T09:55:58.570Z'
tags: ['GraphQL']
slug: declarative-schema-parsing-4
published: true
description: '–†–∞–∑–±–∏—Ä–∞–µ–º GraphQL –Ω–∞ –≤–∏–Ω—Ç–∏–∫–∏, —É—á–∏–º—Å—è –ø–æ–Ω–∏–º–∞—Ç—å –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π Query Language'
---

import { Details } from '../components/Details'
import { CodeSnippet } from '../components/CodeSnippet'
import schema from '../components/graphql/schema.graphql'
import { gql } from '@apollo/client'
import validQuery from '../components/graphql/validQuery.graphql'
import maybePageCode from '!raw-loader!../components/graphql/MaybePage.tsx'

<Details title="–ù–∞–ø–æ–º–∏–Ω–∞–ª–∫–∞ –ø—Ä–æ –ø—Ä–∏–º–µ—Ä">
  –í—ã —É–∂–µ –¥–æ–±—Ä–∞–ª–∏—Ç—å –¥–æ —á–µ—Ç–≤–µ—Ä—Ç–æ–≥–æ –ø–æ—Å—Ç–∞ –∏ –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ –ø–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –º—ã –ø–∏—à–µ–º wiki
  –¥–ª—è –ª—é–±–∏—Ç–µ–ª–µ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è. –ö–∞–∂–¥–∞—è —Å—Ç—Ä–∞–Ω–∏—á–∫–∞ –ø–æ—Å–≤—è—â–µ–Ω–∞ –∞–ª–≥–µ–±—Ä–∞–∏—á–µ—Å–∫–æ–º—É —Ç–∏–ø—É.

–£ –Ω–∞—Å —É–∂–µ –µ—Å—Ç—å –≥–æ—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å

<CodeSnippet code={validQuery} lang="graphql" />

–ò —Å—Ö–µ–º–∞

  <CodeSnippet code={schema} lang="graphql" />
</Details>

## –ü—É—Å—Ç—å –∫—Ç–æ-–Ω–∏–±—É–¥—å –Ω–∞–ø–∏—à–µ—Ç –∫–æ–¥ –∑–∞ –Ω–∞—Å

–ö–∞–∫ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º GraphQL –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ? –û–±—ã—á–Ω–æ –Ω–∞–º –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∫–∞–∫–æ–π-—Ç–æ –∑–∞–ø—Ä–æ—Å, –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏ –ø–æ–∫–∞–∑–∞—Ç—å –∏—Ö –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.
–î–∞–≤–∞–π—Ç–µ –Ω–∞–ø–∏—à–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—é—â–∏–π –∞–ª–≥–µ–±—Ä–∞–∏—á–µ—Å–∫–∏–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö. –ö–æ–Ω–µ—á–Ω–æ –∂–µ –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TypeScript

<CodeSnippet code={maybePageCode} lang="tsx" />

–ß–∏—Ç–∞—Ç–µ–ª—è–º –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞–π—Ç–∏ –∫–æ—Å—è–∫ –≤ –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ :)

<Details title="–ê –∫–æ—Å—è–∫-—Ç–æ –≤–æ—Ç –≤ —á–µ–º:">
  –í –Ω–∞—à–µ–º –∑–∞–ø—Ä–æ—Å—ã –º—ã –∑–∞–±—ã–ª–∏ –ø–æ–ª–µ parameters–°ount, –Ω–æ —Ä–∞–¥–æ—Å—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ
  –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.
  –£–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ —á—Ç–æ TypeScript –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º —ç—Ç–æ –¥–µ–ª–∞—Ç—å. –ü–æ—á–µ–º—É —Ç–∞–∫?
  –î–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —Ç–∏–ø `useQuery`

```ts
export declare function useQuery<TData = any, TVariables = OperationVariables>(
  query: DocumentNode | TypedDocumentNode<TData, TVariables>,
  options?: QueryHookOptions<TData, TVariables>
): QueryResult<TData, TVariables>
```

–î–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∏–ø–∞ `TData` ‚Äì `any`. –ó–Ω–∞—á–∏—Ç –º—ã –º–æ–∂–µ–º –¥–µ–ª–∞—Ç—å –≤—Å–µ —á—Ç–æ —Ö–æ—Ç–∏–º üí•

</Details>

–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º–∫—É –ª–µ–≥–∫–æ. –ü—Ä–æ—Å—Ç–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑—É–µ–º `useQuery` hook –Ω—É–∂–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º

```tsx
type PageData = {
  algebraicDataType: {
    name: string
    id: string
    description: string
  }
}
const { data, loading } = useQuery<PageData>(PageQuery)
```

–ò —Ç–∞–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞... –°–∫—É—É—É—á–Ω–æ ü•±
–ê –µ—â–µ –∏–∑–±—ã—Ç–æ—á–Ω–æ. –£ –Ω–∞—Å —É–∂–µ –µ—Å—Ç—å –∑–∞–ø—Ä–æ—Å. –õ–∏–Ω—Ç–µ—Ä —É–∂–µ —É–±–µ–¥–∏–ª—Å—è —á—Ç–æ –Ω–∞—à –∑–∞–ø—Ä–æ—Å –≤–∞–ª–∏–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É—è —Å—Ö–µ–º—É.

–í—Å–µ –Ω—É–∂–Ω—ã–µ —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –≤ AlgebraicDataType —Ç–∏–ø–µ –≤–Ω—É—Ç—Ä–∏ —Å—Ö–µ–º—ã

–í—Å–µ —á—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–∏–ø –æ—Ç–≤–µ—Ç–∞. –ö–∞–∫ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è?
–î–∞–≤–∞–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏–º [`graphql-codegen`](https://www.graphql-code-generator.com/) –Ω–µ–º–Ω–æ–≥–æ —Å –Ω–∏–º –ø–æ—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–µ–º, –∞ –ø–æ—Ç–æ–º —Ä–∞–∑–±–µ—Ä–µ–º—Å—è –∫–∞–∫ –Ω–∞–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è DX.

`yarn add -D @graphql-codegen/cli @graphql-codegen/typescript`

–ì–æ–≤–æ—Ä–∏–º –µ–º—É init –∏ –Ω–∞–º –ø–æ–∫–∞–∂—É—Ç —É–¥–æ–±–Ω—ã–π wizard –≥–¥–µ –º–æ–∂–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥–∞, –¥–æ–±–∞–≤–∏—Ç—å –Ω—É–∂–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –≤ package.json –∏ –≤—ã–±—Ä–∞—Ç—å –Ω—É–∂–Ω—ã–µ –Ω–∞–º –æ–ø—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.

`yarn graphql-codegen init`

–ß—É—Ç—å-—á—É—Ç—å –ø–æ–¥—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è –Ω–∞—à–∏—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤. –û–Ω –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫

```yml
overwrite: true
schema: 'graphql/schema.graphql'
generates:
  generated.tsx:
    plugins:
      - typescript
```

–¢–∞–∫–æ–π —Å–µ—Ç–∞–ø —Å–¥–µ–ª–∞–µ—Ç –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç—É—é —à—Ç—É–∫—É. –û–Ω —Å–º–∞–ø–∏—Ç –≤—Å–µ –Ω–∞—à–∏ —Ç–∏–ø—ã –Ω–∞ —Ç–∏–ø—ã –∏–∑ Typescript

```graphql
type AlgebraicDataType {
  id: ID!
  name: String!
  description: String!
  parametersCount: Int!
  constructors: [TypeConstructor!]!
  isAliasFor: AlgebraicDataType
}
```

```tsx
export type AlgebraicDataType = {
  __typename?: 'AlgebraicDataType'
  constructors: Array<TypeConstructor>
  description: Scalars['String']
  id: Scalars['ID']
  isAliasFor?: Maybe<AlgebraicDataType>
  name: Scalars['String']
  parametersCount: Scalars['Int']
}
```

<Details title="Scalars?">
```tsx
  export type Scalars = {
    ID: string;
    String: string;
    Boolean: boolean;
    Int: number;
    Float: number;
  }
```

–≠—Ç–æ —Ç–∏–ø –≤ –∫–æ—Ç–æ—Ä–æ–º –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –≤—Å–µ —Å–∫–∞–ª—è—Ä–Ω—ã–µ —Ç–∏–ø—ã –≤ –Ω–∞—à–µ–π —Å—Ö–µ–º–µ.

</Details>

–ü–æ–∫–∞ –Ω–µ –æ—á–µ–Ω—å —Ç–æ –∏ –ø–æ–ª–µ–∑–Ω–æ. –ü—Ä–æ–±–ª–µ–º—É –≤—ã—à–µ —Ç–∞–∫–∞—è –∫–æ–¥–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ—à–∏—Ç—å –Ω–µ –ø–æ–º–æ–∂–µ—Ç.
–ù–∞–º –Ω—É–∂–µ–Ω –µ—â–µ –æ–¥–∏–Ω –ø–ª–∞–≥–∏–Ω. –û–Ω –ø—Ä–æ–π–¥–µ—Ç—Å—è –ø–æ –≤—Å–µ–º –Ω–∞—à–∏–º GraphQL –∑–∞–ø—Ä–æ—Å–∞–º –∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–∞–º —Ç–∏–ø—ã _–æ—Ç–≤–µ—Ç–æ–≤_.

–°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ [–≤–æ—Ç –æ–Ω ‚Äì @graphql-codegen/typescript-operations](https://www.graphql-code-generator.com/plugins/typescript/typescript-operations)

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –µ–≥–æ `yarn add -D @graphql-codegen/typescript-operations`
–ß—É—Ç—å-—á—É—Ç—å –ø—Ä–∞–≤–∏–º –∫–æ–Ω—Ñ–∏–≥–∏ –∏ –≤–∂—É—Ö ü™Ñ

–ú—ã –¥–æ–±–∞–≤–∏–ª–∏ –ø–æ–ª–µ documents. –≠—Ç–æ –ø—É—Ç—å (–∏–ª–∏ –ø—É—Ç–∏) –∫ —Ñ–∞–π–ª–∞–º –≥–¥–µ codegen –±—É–¥–µ—Ç –∏—Å–∫–∞—Ç—å –≤–∞—à–∏ –∑–∞–ø—Ä–æ—Å—ã.
–ü—Ä–∏ —ç—Ç–æ–º –∑–∞–ø—Ä–æ—Å –Ω–µ –æ–±—è–∑–∞–Ω –ª–µ–∂–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ. –ï—Å–ª–∏ –≤—ã —É–∫–∞–∂–µ—Ç–µ –ø—É—Ç—å –∫ .ts –∏–ª–∏ .js —Ñ–∞–π–ª—É, codegen –Ω–∞–π–¥–µ—Ç —Ç–∞–º –∑–∞–ø—Ä–æ—Å –∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–ª—è –Ω–µ–≥–æ —Ç–∏–ø—ã.

```yml
overwrite: true
schema: 'graphql/schema.graphql'
documents: './graphql/**/*.graphql'
generates:
  generated.tsx:
    plugins:
      - typescript
      - typescript-operations
```

–ü–æ–ª—É—á–∏–º —Ç–∏–ø –¥–ª—è –Ω–∞—à–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞

```tsx
export type GetTypeQuery = {
  __typename?: 'Query'
  algebraicDataType?: {
    __typename?: 'AlgebraicDataType'
    name: string
    id: string
    description: string
  } | null
}
```

–í—Å—è –º–æ—â—å –∫–æ–¥–≥–µ–Ω–∞ —Å–∫—Ä—ã—Ç–∞ –≤ –µ–≥–æ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç–∏. –í—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø–ª–∞–≥–∏–Ω—ã –∏ –≤—ã–±–∏—Ä–∞—Ç—å –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö.
–Ø –æ–ø–∏—à—É –Ω–µ—Å–∫–æ–ª—å–∫–æ —á—Ç–æ–±—ã –≤—ã –ø—Ä–æ–Ω–∏–∫–ª–∏—Å—å:

- –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ apollo –≤–∞–º —Å–≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç –≤—Å–µ —Ö—É–∫–∏ –¥–ª—è –ø–æ—Ö–æ–¥–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ–∏—à–∫–∏ apollo –≤–∞–º —Å–≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç —Ç–∏–ø—ã –¥–ª—è –≤–∞—à–∏—Ö `typePolicies` (–ï—Å–ª–∏ –≤—ã –Ω–µ –∑–Ω–∞–µ—Ç–µ —á—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ, –Ω–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ :))
- –ú–æ–∂–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç—Ä–æ—Å–ø–µ–∫—Ü–∏—é
- –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –º–æ–∂–Ω–æ –≥–µ–Ω–µ–Ω—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–∏–ø—ã –¥–ª—è –≤–∞—à–∏—Ö graphql —Ä–µ–∑–æ–ª–≤–µ—Ä–æ–≤
- –ü–ª–∞–≥–∏–Ω—ã –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å React, Vue, Svelte –∏ –ê–Ω–≥—É–ª—è—Ä

<Details title="–ê –µ—Å–ª–∏ —Ç–æ —á—Ç–æ –º—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–∏ –Ω–µ –ø–æ–Ω—Ä–∞–≤–∏—Ç—Å—è –Ω–∞—à–∏–º –ª–∏–Ω—Ç–µ—Ä–∞–º?">
  –¢–æ–≥–¥–∞ –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –≤ –∫–æ–Ω—Ñ–∏–≥ –≤–æ—Ç —Ç–∞–∫—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É

```yml
  hooks:
    afterAllFileWrite: - eslint --fix
```

</Details>

–û—Å—Ç–∞–ª—Å—è —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –≤–æ–ø—Ä–æ—Å: —á—Ç–æ –¥–µ–ª–∞—Ç—å —Å —Ñ–∞–π–ª–∏–∫–æ–º –≥–¥–µ –ª–µ–∂–∞—Ç –≤—Å–µ –Ω–∞—à–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã?
–°–∞–º—ã–º –ø—Ä–æ—Å—Ç—ã–º —Ä–µ—à–µ–Ω–∏–µ–º –±—É–¥–µ—Ç –ø–æ–ª–æ–∂–∏—Ç—å –µ–≥–æ –≤ git. –¢–∞–∫ —á–∞—Å—Ç–æ –¥–µ–ª–∞—é—Ç, –Ω–æ —ç—Ç–æ –ø—Ä–∏–Ω–µ—Å–µ—Ç –≤–∞–º –Ω–µ–º–Ω–æ–≥–æ –≥—Ä—É—Å—Ç–∏ –∏ –±–æ–ª–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç—Ä–µ–±–µ–π–∑–∏—Ç—å –≤–µ—Ç–∫—É —Å –ø–∞—Ä–æ—á–∫–æ–π –Ω–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.
–ù–∞ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ –≤—ã –±—É–¥–µ—Ç–µ –ª–æ–≤–∏—Ç—å merge conflict.
–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ ‚Äì –ø–æ–ª–æ–∂–∏—Ç—å —Ñ–∞–π–ª–∏–∫ –≤ .gitignore. –ù–æ —Ç–æ–≥–¥–∞, –µ—Å–ª–∏ codegen –Ω–µ –±—ã–ª –Ω–∏ —Ä–∞–∑—É –∑–∞–ø—É—â–µ–Ω —Å–ª–æ–º–∞—é—Ç—Å—è –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ CI
–í—ã –∂–µ –±—É–¥–µ—Ç–µ –¥–µ–ª–∞—Ç—å —á—Ç–æ-—Ç–æ —Ç–∏–ø–∞ `import { GetTypeQuery } from './generated.tsx'`.

–Ø –Ω–µ –∑–Ω–∞—é —Ö–æ—Ä–æ—à–µ–≥–æ –ø–ª–∞–≥–∏–Ω–∞ –¥–ª—è —Å–±–æ—Ä—â–∏–∫–∞ –∫–æ—Ç–æ—Ä—ã–π –±–µ—Å—à–æ–≤–Ω–æ —Å–º–æ–∂–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å graphql-codegen –≤ –≤–∞—à—É —Å–±–æ—Ä–∫—É. –ï—Å–ª–∏ –≤—ã –∑–Ω–∞–µ—Ç–µ —Ç–∞–∫–æ–π - –¥–µ–ª–∏—Ç–µ—Å—å.

## –ê –µ—Å—Ç—å —á—Ç–æ-—Ç–æ –µ—â–µ?

–†–∞–∑—É–º–µ–µ—Ç—Å—è! –í —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Å—Ç–µ –º—ã –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ —Ç–µ—Å—Ç–∞—Ö
